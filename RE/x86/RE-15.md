---
id: RE-15
aliases:
  - re-15
tags:
  - re
  - x86
---

[[RE-TOC]]

# Stack

When the execution of a program starts, a contiguous section of memory is allocated, called the stack.

The stack pointer (ESP) is a general-purpose register ([[RE-10]]) that points to the top of the stack. It contains any address such as any address smaller is considered garbage and any greater address is considered valid.

It is important to understand that the stack grows downwards. The "top" of the stack actually points to the lowest stack address in memory, instead of the highest one.

The stack bottom is the largest possible memory address a stack can have.

The stack limit is the smallest valid address of the stack. If the stack pointer gets smaller than this, we get a stack overflow, which can corrupt a program and can allow an attacker to take control of the system. Modern OS have protections against stack overflows.

There are 2 different possible operations on the stack, which are push, and pop.

Pushing a register onto the stack will set the stack pointer to a lower value, usually done by subtracting 4 (because each register is 4 bytes in size) times the number of registers pushed onto the stack and copying the registers onto the stack.

Popping a register from the stack involves copying the data from the stack to the registers and then adding 4 times the number of registers to be popped from the stack onto the stack pointer.
